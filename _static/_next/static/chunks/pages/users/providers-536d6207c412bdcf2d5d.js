(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[246],{692:function(e,r,n){"use strict";n.r(r),n.d(r,{__N_SSP:function(){return Q},default:function(){return R}});var t=n(5893),i=n(4121),s=n(809),o=n.n(s),c=n(6265),a=n(2447),u=n(5832),l=n(8017),d=n(4223),p=n(9345),h=n(6185),f=n(123),j=n(4096),g=n(336),x=n(5754),m=n(58),v=n(4115),b=n(3346),y=n(4306),O=n(9444),P=n(8193),w=n(9352),k=n(5063),S=n(7294),C=n(526),_=n(9999),z=n(6034);function T(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function E(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?T(Object(n),!0).forEach((function(r){(0,c.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function D(e){var r=e.isCurrent,n=void 0!==r&&r,i=e.number,s=e.onPageChange,o=e.pageProps;return n?(0,t.jsx)(h.z,{size:"sm",fontSize:"xs",width:"4",colorScheme:"pink",disabled:!0,_disabled:{backgroundColor:"pink.500",cursor:"default"},children:i}):(0,t.jsx)(h.z,{size:"sm",fontSize:"xs",width:"4",backgroundColor:"gray.700",_hover:{backgroundColor:"gray.500"},onClick:function(){return s(E(E({},o),{},{skip:i}))},children:i})}function Z(e,r){return(0,_.Z)(new Array(r-e)).map((function(r,n){return e+n+1})).filter((function(e){return e>0}))}function X(e){var r=e.total,n=(e.limit,e.currentPage),i=void 0===n?1:n,s=e.onPageChange,o=e.lastPage,c=e.pageProps,a=i>1?Z(i-1-1,i-1):[],u=i<o?Z(i,Math.min(i+1,o)):[];return(0,t.jsxs)(z.Kq,{direction:["column","row"],spacing:"6",marginTop:"8",justifyContent:"space-between",alignItems:"center",children:[(0,t.jsxs)(l.xu,{children:[(0,t.jsx)("strong",{children:c.skip})," - ",(0,t.jsx)("strong",{children:c.limit})," ","de ",(0,t.jsx)("strong",{children:r})]}),(0,t.jsxs)(z.Kq,{direction:"row",spacing:"2",children:[i>2&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D,{onPageChange:s,number:1,pageProps:c}),i>3&&(0,t.jsx)(v.x,{color:"gray.300",width:"8",textAlign:"center",children:"..."})]}),a.length>0&&a.map((function(e){return(0,t.jsx)(D,{onPageChange:s,number:e,pageProps:c},e)})),(0,t.jsx)(D,{onPageChange:s,number:i,isCurrent:!0,pageProps:c}),u.length>0&&u.map((function(e){return(0,t.jsx)(D,{onPageChange:s,number:e,pageProps:c},e)})),i+1<o&&(0,t.jsxs)(t.Fragment,{children:[i+1+1<o&&(0,t.jsx)(v.x,{color:"gray.300",width:"8",textAlign:"center",children:"..."}),(0,t.jsx)(D,{onPageChange:s,number:o,pageProps:c})]})]})]})}var A=(0,S.memo)(X,(function(e,r){return Object.is(e,r)})),I=n(6746),N=n(8767),F=n(1170);function J(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function W(){return(W=(0,a.Z)(o().mark((function e(r){var n,t,i,s,c,a,u,l,d,p,h,f,j,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.limit,t=void 0===n?10:n,i=r.skip,s=void 0===i?0:i,c=r.order,a=void 0===c?"created_at-":c,u=r.fields,l=void 0===u?void 0:u,e.next=3,F.h.get("/v1/users/providers",{params:{limit:t,skip:s,order:a,fields:l}});case 3:return d=e.sent,p=d.data,h=p.results,f=p.total,j=p.current_page,g=p.pages_total,e.abrupt("return",{users:h,total:f,current_page:j,pages_total:g});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,r){var n=e.limit,t=void 0===n?10:n,i=e.skip,s=void 0===i?0:i,o=e.order,a=void 0===o?"created_at-":o,u=e.fields,l=void 0===u?void 0:u;return(0,N.useQuery)(["users",s],(function(){return function(e){return W.apply(this,arguments)}({limit:t,skip:s,order:a,fields:l})}),function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?J(Object(n),!0).forEach((function(r){(0,c.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}({staleTime:6e5},r))}var B=n(7479),K=n(6061);function L(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function M(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?L(Object(n),!0).forEach((function(r){(0,c.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var Q=!0;function R(e){var r=e.users,n=e.total,s=e.current_page,c=e.pages_total,_=(0,S.useState)({limit:10,skip:0,order:"created_at-",fields:void 0}),z=_[0],T=_[1],E=(0,S.useState)([]),D=E[0],Z=E[1],X=(0,S.useState)(!1),N=X[0],J=X[1],W=(0,S.useState)(!1),L=W[0],Q=W[1],R=(0,S.useState)(!1),U=R[0],Y=R[1],$=(0,S.useState)([]),H=$[0],G=$[1],V=(0,S.useState)(0),ee=V[0],re=V[1],ne=q(z,{initialData:r}),te=ne.isLoading,ie=ne.isFetching,se=ne.error,oe=(0,K.D1)().activeUserProviders,ce=(0,u.S)({base:!1,lg:!0});function ae(){return(ae=(0,a.Z)(o().mark((function e(r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.E.prefetchQuery(["user",r],(0,a.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.h.get("/v1/users/".concat(r));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))),{staleTime:6e5});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ue=function(){var e=(0,a.Z)(o().mark((function e(r){var n,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe({users:[r],paginationProps:z});case 2:n=e.sent,t=n.map((function(e){return M(M({},e),{},{select:!1})})),Z(t);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),le=function(){var e=(0,a.Z)(o().mark((function e(){var r,n,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=D.filter((function(e){return e.select})).map((function(e){var r=(0,i.Z)(e.types,1)[0];return{user_id:e.id,active:e.select?!r.active:r.active,user_type_user_id:r.id}})),e.next=3,oe({users:r,paginationProps:z});case 3:n=e.sent,t=n.map((function(e){return M(M({},e),{},{select:!1})})),Z(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function de(){Y(!1)}return(0,S.useEffect)((function(){var e=r.map((function(e){return M(M({},e),{},{select:!1})}));Z(e)}),[]),(0,S.useEffect)((function(){J(D.every((function(e){return e.select}))),Q(D.some((function(e){return e.select})))}),[D]),(0,t.jsxs)(l.xu,{children:[(0,t.jsxs)(d.u_,{onClose:de,size:"xl",isOpen:U,children:[(0,t.jsx)(d.ZA,{}),(0,t.jsxs)(d.hz,{children:[(0,t.jsx)(d.xB,{children:"Imagens dos documentos"}),(0,t.jsx)(d.ol,{}),(0,t.jsx)(d.fe,{children:(0,t.jsxs)(p.r,{templateRows:"repeat(1, 1fr)",templateColumns:"repeat(6, 1fr)",gap:4,children:[(0,t.jsx)(p.P,{rowSpan:1,colSpan:1,children:ee>0&&(0,t.jsx)(h.z,{colorScheme:"teal",size:"lg",onClick:function(){return re(ee>0?ee-1:0)},children:"<"})}),(0,t.jsx)(p.P,{rowSpan:1,colSpan:4,children:H&&H.length>0&&H[ee]&&(0,t.jsx)(f.E,{src:H[ee].image.link,alt:H[ee].value})}),(0,t.jsx)(p.P,{rowSpan:1,colSpan:1,children:ee<H.length-1&&(0,t.jsx)(h.z,{colorScheme:"teal",size:"lg",onClick:function(){return re(ee<H.length-1?ee+1:H.length-1)},children:">"})})]})}),(0,t.jsx)(d.mz,{children:(0,t.jsx)(h.z,{onClick:de,children:"Close"})})]})]}),(0,t.jsx)(C.h,{}),(0,t.jsxs)(j.k,{width:"100%",marginY:"6",maxWidth:1480,marginX:"auto",paddingX:"6",children:[(0,t.jsx)(I.Y,{}),(0,t.jsxs)(l.xu,{flex:"1",borderRadius:8,backgroundColor:"gray.800",padding:"8",children:[(0,t.jsxs)(j.k,{marginBottom:"8",justifyContent:"space-between",alignItems:"center",children:[(0,t.jsxs)(g.X,{size:"lg",fontWeight:"normal",children:["Provedores",!te&&ie&&(0,t.jsx)(x.$,{size:"sm",color:"gray.500",marginLeft:"4"})]}),(0,t.jsx)(k.default,{href:"/users/create",passHref:!0,children:(0,t.jsx)(h.z,{as:"a",size:"sm",fontSize:"sm",colorScheme:"pink",leftIcon:(0,t.jsx)(m.J,{as:w.p22,fontSize:"20"}),children:"Criar novo"})})]}),te?(0,t.jsx)(j.k,{justifyContent:"center",children:(0,t.jsx)(x.$,{})}):se?(0,t.jsx)(j.k,{justifyContent:"center",children:(0,t.jsx)(v.x,{children:"Falha ao obter dados do usu\xe1rio"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(b.iA,{colorScheme:"whiteAlpha",children:[(0,t.jsx)(b.hr,{children:(0,t.jsxs)(b.Tr,{children:[(0,t.jsx)(b.Th,{paddingX:["4","4","6"],color:"gray.300",width:"8",children:(0,t.jsx)(y.X,{colorScheme:"pink",onChange:function(){if(N){var e=D.map((function(e){return M(M({},e),{},{select:!1})}));Z(e)}else{var r=D.map((function(e){return M(M({},e),{},{select:!0})}));Z(r)}},isChecked:N})}),(0,t.jsx)(b.Th,{children:"Usu\xe1rio"}),(0,t.jsx)(b.Th,{children:"Documento"}),ce&&(0,t.jsx)(b.Th,{children:"Data de cadastro"}),(0,t.jsx)(b.Th,{children:"Imagens"}),(0,t.jsx)(b.Th,{children:"Ativa\xe7\xe3o"}),(0,t.jsx)(b.Th,{width:"2",children:N||L&&(0,t.jsx)(h.z,{as:"a",size:"sm",fontSize:"sm",colorScheme:"pink",leftIcon:(0,t.jsx)(m.J,{as:w.p22,fontSize:"20"}),onClick:function(){return le()},children:"Ativar"})}),(0,t.jsx)(b.Th,{width:"8"})]})}),(0,t.jsx)(b.p3,{children:D&&D.length>0&&D.map((function(e){var r=(0,i.Z)(e.types,1)[0],n=r.active,s=r.id,o=n?"desativar":"ativar";return(0,t.jsxs)(b.Tr,{children:[(0,t.jsx)(b.Td,{paddingX:["4","4","6"],children:(0,t.jsx)(y.X,{isChecked:e.select,colorScheme:"pink",onChange:function(){return function(e){var r=D.map((function(r){return r.id===e?M(M({},r),{},{select:!r.select}):r}));Z(r),J(r.every((function(e){return e.select})))}(e.id)}})}),(0,t.jsx)(b.Td,{children:(0,t.jsxs)(l.xu,{children:[(0,t.jsx)(O.r,{color:"purple.400",onMouseEnter:function(){return function(e){return ae.apply(this,arguments)}(e.id)},children:(0,t.jsx)(v.x,{fontWeight:"bold",children:e.name})}),(0,t.jsx)(v.x,{fontWeight:"sm",color:"gray.300",children:e.email})]})}),(0,t.jsx)(b.Td,{children:(0,t.jsx)(v.x,{children:e.cpf})}),ce&&(0,t.jsx)(b.Td,{children:(0,t.jsx)(v.x,{children:e.created_at})}),(0,t.jsx)(b.Td,{children:(0,t.jsx)(h.z,{as:"a",size:"sm",fontSize:"sm",colorScheme:"pink",onClick:function(){return r=e.documents,Y(!0),void G(r);var r},leftIcon:(0,t.jsx)(m.J,{as:n?P.mny:P.CSE,fontSize:"16",color:n?"green.500":"black.500"}),children:"Documentos"})}),(0,t.jsx)(b.Td,{children:(0,t.jsx)(h.z,{as:"a",size:"sm",fontSize:"sm",colorScheme:n?"pink":"yellow",onClick:function(){return ue({user_id:e.id,active:!n,user_type_user_id:s})},leftIcon:(0,t.jsx)(m.J,{as:n?P.mny:P.CSE,fontSize:"16",color:n?"green.500":"black.500"}),children:ce?o:""})})]},e.id)}))})]}),(0,t.jsx)(A,{total:n,currentPage:Number(s),pageProps:z,onPageChange:T,lastPage:Number(c)})]})]})]})]})}},9431:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users/providers",function(){return n(692)}])}},function(e){e.O(0,[774,937,617,43,980,521,761,888,179],(function(){return r=9431,e(e.s=r);var r}));var r=e.O();_N_E=r}]);